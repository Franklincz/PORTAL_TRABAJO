

@model PORTAL_TRABAJO.Web.Models.Candidato


@{
    ViewData["Title"] = "NewCandidato";
}

<form method="post" action="/Candidato/Grabar" enctype="multipart/form-data">
    <div>
        <div class="row justify-content-center">
            <div class="col-md-4">
                <h6>REGISTRO DE DATOS</h6>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <label>NOMBRE</label>
                <input type="text" class="form-control" id="txtNombreCandidato" placeholder="Ingreses sus nombres">
            </div>
            <div class="col-md-6">
                <label>APELLIDOS</label>
                <input type="text" class="form-control" id="txtApellidoCandidato" placeholder="Ingreses sus apellidos">
            </div>
        </div>
        <div class="row">
            <label>   </label>
        </div>
        <div class="row">
            <label>   </label>
        </div>
        <div class="row">
            <div class="col-md-6">
                <label>FECHA DE NACIMIENTO</label>
                <input type="date" class="form-control" id="dateFechNacimCandidato">
            </div>
            <div class="col-md-6">
                <label>ESTADO CIVIL</label>
                @*<input type="text" class="form-control" id="txtEstadoCivil">*@
                <select asp-for="EstadocivilIdestciv" class="form-control" asp-items="ViewBag.EstadocivilIdestciv"></select>

            </div>
        </div>
        <div class="row">
            <label>   </label>
        </div>
        <div class="row">
            <label>   </label>
        </div>

        <div class="row">


            @*<div class="col-md-4">
                    <label>Numero de documento</label>
                    <input type="number" class="form-control" id="nbDocumento">
                </div>*@

            <div class="col-md-4">
                <label>Número de contacto</label>
                <input type="text" class="form-control" id="nbtelefono">
            </div>
            <div class="col-md-4">
                <label>Contraseña</label>
                <input type="password" class="form-control" id="txtcontraseña" placeholder="Ingreses una nueva contraseña">
            </div>
            <!-----Add for correo Electronico-->
            <div class="col-md-4">
                <label>Correo</label>
                <input type="email" class="form-control" id="txtcorreo" placeholder="Ingrese su correo">
            </div>

        </div>
        <div class="row">
            <label>   </label>
        </div>
        <div class="row">
            <label>   </label>
        </div>

        <div class="row">
            @*<div class="col-md-4">
                    <label>Nacionalidad</label>
                    <input type="text" class="form-control" id="txtpais">
                </div>*@

            <div class="col-md-4">
                <label>Género</label>
                @*<input type="text" class="form-control" id="txtgenero">*@
                @*<select id="txtgenero" class="form-control" asp-items="ViewBag.Genero"></select>*@
                <label asp-for="GeneroIdgenero" class="control-label"></label>
                <select asp-for="GeneroIdgenero" class="form-control" asp-items="ViewBag.GeneroIdgenero"></select>
            </div>


            <!-----adddddddddddddddddd-->
            <div class="col-md-4">

                @*<input type="text" class="form-control" id="txtgenero">*@
                @*<select id="txtgenero" class="form-control" asp-items="ViewBag.Genero"></select>*@
                <label>Número de dni</label>
                <input type="text" class="form-control" id="txtdni">
            </div>
            <!--end Add-->
            <!-----adddddddddddddddddd-->
            <div class="col-md-4">

                @*<input type="text" class="form-control" id="txtgenero">*@
                @*<select id="txtgenero" class="form-control" asp-items="ViewBag.Genero"></select>*@
                <div class="form-group">
                    <label class="control-label">Cargar Hoja de vida</label>
                    <!--<div class="custom-file">-->
                    @*<input  class="custom-file-input" type="file" id="txtHojadevida" multiple />*@
                    <!--<input type="file" id="txtHojadevida" asp-for="cvUrl" name="files" value=" required " />
            <label class="custom-file-label" for="customFile">cargar cv</label>
        </div>-->


                    <div class="custom-file">
                        <input asp-for="cvUrl" class="custom-file-input" id="txtHojadevida" />
                        <label class="custom-file-label" for="customFile">choose file</label>
                    </div>



                </div>

                @*<div class="col-md-4">

                    <div class="custom-file">
                        <input asp-for="fotoArchivo" class="custom-file-input" id="txtfoto" />
                        <label class="custom-file-label" for="customFile">choose file</label>
                    </div>

                </div>*@

                <div class="form-group">
                    <label class="control-label">Cargar Foto de Perfil</label>
                    <!--<div class="custom-file">-->
                    @*<input  class="custom-file-input" type="file" id="txtHojadevida" multiple />*@
                    <!--<input type="file" id="txtHojadevida" asp-for="cvUrl" name="files" value=" required " />
            <label class="custom-file-label" for="customFile">cargar cv</label>
        </div>-->


                <div class="custom-file">
                    <input asp-for="fotoArchivo" class="custom-file-input" id="txtfoto" />
                    <label class="custom-file-label" for="customFile">Subir foto de perfil</label>
                </div>



                </div>













            </div>
            <!--end Add-->











        </div>
        <div class="row">
            <label>   </label>
        </div>
        <div class="row">
            <label>   </label>
        </div>

        <div class="row">
            <div class="col-md-4">
                <label>Descripción breve de tu perfil profesional</label>

            </div>
            <div class="col-md-8">
                <textarea id="txtdescrpCand" class="form-control" aria-label="With textarea"></textarea>
            </div>
        </div>

        <div class="row">
            <label>   </label>
        </div>
        <div class="row">
            <label>  </label>
        </div>

        <div class="row justify-content-center">
            <button id="crearCandidatoForm" type="button" class="btn btn-success btn-lg">CREAR</button>
        </div>
        <div class="row">
            <label>   </label>
        </div>
        <div class="row">
            <label>   </label>
        </div>

        <div class="row justify-content-center">
            <button id="CandidatoRegresar" type="button" class="btn btn-outline-primary btn-lg">VOLVER</button>
        </div>

    </div>
</form>
<input type="hidden" id="hidIDCandidato" value="-1" />




<script>
            $("#crearCandidatoForm").click(function () {

                let vIDCandidato = $("#hidIDCandidato").val();
                let vNombres = $("#txtNombreCandidato").val();
                let vApellidos = $("#txtApellidoCandidato").val();
                let vDni = $("#txtdni").val();
                
                let vfechanacim = $("#dateFechNacimCandidato").val();
                let vTelefono = $("#nbtelefono").val();
                let vDescripcion = $("#txtdescrpCand").val();
                let vCorreo = $("#txtcorreo").val();
                let vContraseña = $("#txtcontraseña").val();
                let vGenero = $("#GeneroIdgenero").val();
                let vEstadoCivil = $("#EstadocivilIdestciv").val();
              

                var formdata = new FormData();



                formdata.append('file', $('#txtHojadevida')[0].files[0]);//agrego el documento cv
                formdata.append('foto', $('#txtfoto')[0].files[0]);//file=nombre en como lo voy a revisar
                formdata.append("Id", vIDCandidato);
                formdata.append("Nombres", vNombres);
                formdata.append("Apellidos", vApellidos);
                formdata.append("Dni", vDni);
                formdata.append("FechaNacimiento", vfechanacim);
                formdata.append("Telefono", vTelefono);
                formdata.append("Descripcion", vDescripcion );
                formdata.append("Correo", vCorreo);
                formdata.append("Contraseña", vContraseña);
                formdata.append("Genero", vGenero);
                formdata.append("EstadoCivil", vEstadoCivil);
                //formdata.append('foto', $('#txtHojadevida')[0].files[0]);

            
            $.ajax({
                type: "POST",
                url: "NewCandidato",
              
                data: formdata,
                processData: false,
                contentType: false,
                success: function(exito) {
                    if (exito) {
                        alert("Se registró correctamente")
                    } else {
                       
                        alert("Ocurrió un error en la transacción")
                    }
                }
            });
        });
</script>